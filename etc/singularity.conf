# SINGULARITY.CONF
# This is the global configuration file for Singularity. This file controls
# what the container is allowed to do on a particular host, and as a result
# this file must be owned by root.


# ALLOW PID NS: [BOOL]
# Should we disable the PID namespace always? This maybe desirable for
# resources that are scheduled with non CGroups enabled resource managers.
allow pid ns = yes


# ALLOW USER SCRATCH: [BOOL]
# DEFAULT: yes
# Should we allow users to specify scratch directories on the command line?
# NOTE: Regardless of this setting, if the host kernel is too old (doesn't
# support PR_SET_NO_NEW_PRIVS) to allow this to be done safely, this
# feature is disabled.
allow user scratch = yes


# ALLOW SETUID: [BOOL]
# DEFAULT: no
# Should we allow users to utilize the setuid binary for launching singularity?
# The majority of features require this to be set to yes, but newer Fedora and
# Ubuntu kernels can provide limited functionality in unprivileged mode. The
# default value is 'no' such that any entry but 'yes' will fail to safest.
allow setuid = yes


# CONFIG PASSWD: [BOOL]
# DEFAULT: yes
# If /etc/passwd exists within the container, this will automatically append
# an entry for the calling user
config passwd = yes


# CONFIG GROUP: [BOOL]
# DEFAULT: yes
# If /etc/group exists within the container, this will automatically append
# an entry for the calling user
config group = yes


# MOUNT PROC: [BOOL]
# DEFAULT: yes
# Should we automatically bind mount /proc within the container?
mount proc = yes


# MOUNT SYS: [BOOL]
# DEFAULT: yes
# Should we automatically bind mount /sys within the container?
mount sys = yes


# MOUNT HOME: [BOOL]
# DEFAULT: yes
# Should we automatically determine the calling user's home directory and
# attempt to mount it's base path into the container?
mount home = yes


# MOUNT TMP: [BOOL]
# DEFAULT: yes
# Should we automatically bind mount /tmp and /var/tmp into the container?
mount tmp = yes


# MOUNT HOSTFS: [BOOL]
# DEFAULT: yes
# Probe for mounted file systems that are mounted on the host, and bind those
# into the container?
mount hostfs = yes


# BIND PATH: [STRING]
# DEFAULT: Undefined
# Define a list of files/directories that should be made available from within
# the container. The file or directory must exist within the container on
# which to attach to. you can specify a different source and destination
# path (respectively) with a comma; otherwise source and dest are the same.
#bind path = /etc/singularity/default-nsswitch.conf, /etc/nsswitch.conf
bind path = /etc/resolv.conf
bind path = /etc/hosts
bind path = /dev


# ENABLE OVERLAY: [BOOL]
# DEFAULT: no
# Enabling this option will make it possible to specify bind paths to locations
# that do not currently exist within the container. Some limitations still exist
# when running in completely non-privileged mode. (note: this option is only
# supported on hosts that support overlay file systems).
enable overlay = yes


# MOUNT SLAVE: [BOOL]
# DEFAULT: no
# Should we automatically propogate filesystem changes from the host?
# This should be set to 'yes' when autofs mounts in the system should
# show up in the container.
mount slave = no


# CONTAINER DIR: [STRING]
# DEFAULT: /var/singularity/mnt
# Where does the container mount namespace begin from (e.g. where the container
# gets mounted while in use)
container dir = /var/singularity/mnt


# SESSIONDIR PREFIX: [STRING]
# DEFAULT: /tmp/.singularity-session-
# This specifies the prefix for the session directory. Appended to this string
# is an identification string unique to each user and container. If /tmp is
# not reasonable for your environment, another suggestion could be:
#sessiondir prefix = /var/singularity/sessions/


#TODO: This needs to be moved to $sysconfdir/singularity/init and reassigned to
# a variable (e.g. SINGULARITY_SCRATCHDIR) such that this can be used by the
# src/mount/* modules.

# SCRATCH DIR: [STRING]
# DEFAULT: Undefined
# When empty scratch directories (such as a per-container /tmp) are created
# to support the 'bind scratch' directive, they will be stored in the directory
# specified here.  If this is undefined (default), then the following locations
# will be tried:
# - $_CONDOR_SCRATCH_DIR
# - $TMPDIR
# - /tmp
#scratch dir = /var/singularity/scratch/

